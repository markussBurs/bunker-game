<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë—É–Ω–∫–µ—Ä 42 - –û–Ω–ª–∞–π–Ω –∏–≥—Ä–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        :root {
            --primary: #1a1a2e;
            --secondary: #16213e;
            --accent: #0f3460;
            --highlight: #e94560;
            --text: #ffffff;
            --text-secondary: #b8b8b8;
            --card-bg: rgba(255, 255, 255, 0.1);
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            background-attachment: fixed;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: rgba(22, 33, 62, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            border-bottom: 1px solid rgba(233, 69, 96, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            color: var(--highlight);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .username {
            background: var(--accent);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .main-content {
            padding: 2rem 0;
            min-height: calc(100vh - 140px);
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block;
        }
        
        .auth-screen {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }
        
        .auth-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .auth-card h2 {
            margin-bottom: 1.5rem;
            color: var(--highlight);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--highlight);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: linear-gradient(45deg, var(--highlight), #c1121f);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .lobby-screen {
            text-align: center;
        }
        
        .lobby-header {
            margin-bottom: 2rem;
        }
        
        .room-code {
            background: var(--accent);
            padding: 10px 20px;
            border-radius: 10px;
            display: inline-block;
            margin: 10px 0;
            font-family: monospace;
            font-size: 1.2rem;
            letter-spacing: 2px;
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }
        
        .player-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
            text-align: left;
        }
        
        .player-card.ready {
            border-color: var(--success);
        }
        
        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .player-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .player-status {
            font-size: 0.8rem;
            padding: 3px 10px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .player-status.ready {
            background: var(--success);
        }
        
        .attributes-list {
            margin-top: 1rem;
        }
        
        .attribute {
            margin-bottom: 0.8rem;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .attribute.hidden {
            background: rgba(255, 255, 255, 0.02);
            color: var(--text-secondary);
        }
        
        .attribute.hidden .attribute-value {
            filter: blur(4px);
            user-select: none;
        }
        
        .attribute-name {
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .reveal-btn {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 4px;
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.7rem;
        }
        
        .reveal-btn:hover {
            background: var(--highlight);
        }
        
        .reveal-btn:disabled {
            background: #666;
            cursor: not-allowed;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .game-screen {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .situation-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            border-left: 4px solid var(--highlight);
        }
        
        .situation-title {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--highlight);
        }
        
        .cards-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 1.5rem 0;
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.2rem;
            width: 200px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }
        
        .card:hover {
            transform: translateY(-5px);
            border-color: var(--highlight);
        }
        
        .card-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--highlight);
        }
        
        .vote-screen {
            text-align: center;
        }
        
        .vote-instruction {
            margin-bottom: 2rem;
            font-size: 1.2rem;
        }
        
        .chat-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .chat-messages {
            margin-bottom: 1rem;
            min-height: 200px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--text);
        }
        
        .chat-input button {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0 15px;
            cursor: pointer;
        }
        
        .message {
            margin-bottom: 0.8rem;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }
        
        .message.system {
            background: rgba(233, 69, 96, 0.2);
            font-style: italic;
        }
        
        .message-sender {
            font-weight: 600;
            color: var(--highlight);
        }
        
        footer {
            background: var(--secondary);
            padding: 1.5rem 0;
            text-align: center;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .tab-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            background: var(--highlight);
        }
        
        .tab-content {
            transition: all 0.3s ease;
        }
        
        .round-info {
            background: var(--accent);
            padding: 10px 20px;
            border-radius: 10px;
            margin: 10px 0;
            display: inline-block;
        }
        
        .my-cards-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 2px solid var(--highlight);
        }
        
        .my-cards-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--highlight);
            text-align: center;
        }
        
        .my-attributes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }
        
        .my-attribute {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .my-attribute.revealed {
            background: rgba(76, 175, 80, 0.2);
            border-left: 4px solid var(--success);
        }
        
        .my-attribute.locked .attribute-value {
            color: var(--text-secondary);
        }
        
        .round-attributes {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }
        
        .round-attribute {
            padding: 5px 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            font-size: 0.9rem;
        }
        
        .round-attribute.active {
            background: var(--highlight);
        }
        
        @media (max-width: 768px) {
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .game-controls {
                flex-direction: column;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .my-attributes {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-radiation-alt"></i>
                    –ë—É–Ω–∫–µ—Ä 42
                </div>
                <div class="user-info">
                    <div id="user-display" class="username" style="display: none;"></div>
                    <button id="logout-btn" class="btn btn-secondary" style="display: none; width: auto; padding: 8px 15px;">
                        <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <main class="main-content">
        <div class="container">
            <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
            <div id="auth-screen" class="screen active">
                <div class="auth-screen">
                    <div class="auth-card">
                        <h2><i class="fas fa-user-shield"></i> –í—Ö–æ–¥ –≤ –ë—É–Ω–∫–µ—Ä 42</h2>
                        
                        <!-- –í–∫–ª–∞–¥–∫–∏ -->
                        <div class="tabs">
                            <button id="tab-create" class="tab-btn active">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
                            <button id="tab-join" class="tab-btn">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                        </div>
                        
                        <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã -->
                        <div id="create-tab" class="tab-content">
                            <div class="form-group">
                                <label for="username-create">–í–∞—à –Ω–∏–∫–Ω–µ–π–º:</label>
                                <input type="text" id="username-create" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
                            </div>
                            <button id="create-room-btn" class="btn">
                                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
                            </button>
                        </div>
                        
                        <!-- –§–æ—Ä–º–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è -->
                        <div id="join-tab" class="tab-content" style="display: none;">
                            <div class="form-group">
                                <label for="username-join">–í–∞—à –Ω–∏–∫–Ω–µ–π–º:</label>
                                <input type="text" id="username-join" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
                            </div>
                            <div class="form-group">
                                <label for="room-code-input">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</label>
                                <input type="text" id="room-code-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã" maxlength="8" style="text-transform: uppercase;">
                            </div>
                            <button id="join-room-btn" class="btn">
                                <i class="fas fa-sign-in-alt"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                            </button>
                        </div>
                        
                        <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-secondary);">
                            <p>–ù–∏–∫–∞–∫–∏—Ö –ø–∞—Ä–æ–ª–µ–π! –ü—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º –∏ –Ω–∞—á–Ω–∏—Ç–µ –∏–≥—Ä–∞—Ç—å.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –≠–∫—Ä–∞–Ω –ª–æ–±–±–∏ -->
            <div id="lobby-screen" class="screen">
                <div class="lobby-screen">
                    <div class="lobby-header">
                        <h1>–ö–æ–º–Ω–∞—Ç–∞ –∏–≥—Ä—ã</h1>
                        <div class="room-code">–ö–æ–¥: <span id="room-code">BUNK42</span></div>
                        <p>–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–æ–¥–æ–º —Å –¥—Ä—É–∑—å—è–º–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –∏–≥—Ä–µ</p>
                    </div>
                    
                    <div class="players-grid" id="players-grid">
                        <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    
                    <div class="game-controls">
                        <button id="ready-btn" class="btn btn-secondary">
                            <i class="fas fa-check"></i> –ì–æ—Ç–æ–≤
                        </button>
                        <button id="start-game-btn" class="btn" style="display: none;">
                            <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                        </button>
                        <button id="leave-room-btn" class="btn btn-secondary">
                            <i class="fas fa-door-open"></i> –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É
                        </button>
                    </div>
                    
                    <div class="chat-container">
                        <h3><i class="fas fa-comments"></i> –ß–∞—Ç –∫–æ–º–Ω–∞—Ç—ã</h3>
                        <div class="chat-messages" id="lobby-chat">
                            <div class="message system">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–Ω–∞—Ç—É! –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π —Å –ø–æ–º–æ—â—å—é –∫–æ–¥–∞ –∫–æ–º–Ω–∞—Ç—ã.</div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="lobby-chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                            <button id="lobby-chat-send"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
            <div id="game-screen" class="screen">
                <div class="game-screen">
                    <div class="situation-container">
                        <h2 class="situation-title">–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è</h2>
                        <p id="current-situation">–Ø–¥–µ—Ä–Ω–∞—è –≤–æ–π–Ω–∞ —É–Ω–∏—á—Ç–æ–∂–∏–ª–∞ —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é. –í—ã –æ–∫–∞–∑–∞–ª–∏—Å—å –≤ –±—É–Ω–∫–µ—Ä–µ, —Å–ø–æ—Å–æ–±–Ω–æ–º –≤–º–µ—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ 3 —á–µ–ª–æ–≤–µ–∫. –†–µ—Å—É—Ä—Å–æ–≤ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ 5 –ª–µ—Ç. –í–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–µ—à–∏—Ç—å, –∫—Ç–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –±—É–Ω–∫–µ—Ä–µ, –∞ –∫—Ç–æ –±—É–¥–µ—Ç –∏–∑–≥–Ω–∞–Ω –Ω–∞ –≤–µ—Ä–Ω—É—é —Å–º–µ—Ä—Ç—å.</p>
                        <div class="round-info" id="round-info">
                            –ö—Ä—É–≥ 1: –û—Ç–∫—Ä—ã—Ç–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è
                        </div>
                        <div class="round-attributes" id="round-attributes">
                            <!-- –ê—Ç—Ä–∏–±—É—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –∫—Ä—É–≥–∞ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                        </div>
                    </div>

                    <!-- –ú–æ–∏ –∫–∞—Ä—Ç—ã -->
                    <div class="my-cards-container">
                        <h2 class="my-cards-title">üé¥ –ú–æ–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h2>
                        <div class="my-attributes" id="my-attributes">
                            <!-- –ú–æ–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                    
                    <h2>–£—á–∞—Å—Ç–Ω–∏–∫–∏ –±—É–Ω–∫–µ—Ä–∞</h2>
                    <div class="players-grid" id="game-players-grid">
                        <!-- –ò–≥—Ä–æ–∫–∏ –≤ –∏–≥—Ä–µ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    
                    <h2>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã</h2>
                    <div class="cards-container" id="cards-container">
                        <!-- –ö–∞—Ä—Ç—ã –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    
                    <div class="game-controls">
                        <button id="next-round-btn" class="btn">
                            <i class="fas fa-forward"></i> –°–ª–µ–¥—É—é—â–∏–π –∫—Ä—É–≥
                        </button>
                        <button id="game-vote-btn" class="btn">
                            <i class="fas fa-vote-yea"></i> –ù–∞—á–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
                        </button>
                    </div>
                    
                    <div class="chat-container">
                        <h3><i class="fas fa-comments"></i> –ò–≥—Ä–æ–≤–æ–π —á–∞—Ç</h3>
                        <div class="chat-messages" id="game-chat">
                            <div class="message system">–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –û–±—Å—É–∂–¥–∞–π—Ç–µ, –∫—Ç–æ –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è –≤ –±—É–Ω–∫–µ—Ä–µ.</div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="game-chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                            <button id="game-chat-send"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –≠–∫—Ä–∞–Ω –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è -->
            <div id="vote-screen" class="screen">
                <div class="vote-screen">
                    <h1>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ</h1>
                    <p class="vote-instruction">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –±—É–Ω–∫–µ—Ä–∞:</p>
                    
                    <div class="players-grid" id="vote-players-grid">
                        <!-- –ò–≥—Ä–æ–∫–∏ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                    
                    <div class="game-controls">
                        <button id="confirm-vote-btn" class="btn">
                            <i class="fas fa-check"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≥–æ–ª–æ—Å
                        </button>
                        <button id="cancel-vote-btn" class="btn btn-secondary">
                            <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <p>–ë—É–Ω–∫–µ—Ä 42 - –û–Ω–ª–∞–π–Ω –∏–≥—Ä–∞ –Ω–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ ¬© 2023</p>
        </div>
    </footer>

    <script>
        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
        const SERVER_URL = 'https://bunker-server-uzz6.onrender.com';
        console.log('üîÑ –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É:', SERVER_URL);
        
        let socket;
        
        try {
            socket = io(SERVER_URL, {
                transports: ['websocket', 'polling'],
                timeout: 10000
            });
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:', error);
            alert('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É');
        }
        
        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –∏–≥—Ä—ã
        const professions = ["–í—Ä–∞—á", "–ò–Ω–∂–µ–Ω–µ—Ä", "–£—á–µ–Ω—ã–π", "–°–æ–ª–¥–∞—Ç", "–§–µ—Ä–º–µ—Ä", "–ü–æ–≤–∞—Ä", "–£—á–∏—Ç–µ–ª—å", "–°—Ç—Ä–æ–∏—Ç–µ–ª—å"];
        const healthConditions = ["–ó–¥–æ—Ä–æ–≤", "–õ–µ–≥–∫–æ–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–µ", "–•—Ä–æ–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–µ", "–ò–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å"];
        const biology = ["–ú—É–∂—á–∏–Ω–∞, 25 –ª–µ—Ç", "–ñ–µ–Ω—â–∏–Ω–∞, 30 –ª–µ—Ç", "–ú—É–∂—á–∏–Ω–∞, 45 –ª–µ—Ç", "–ñ–µ–Ω—â–∏–Ω–∞, 22 –≥–æ–¥–∞"];
        const hobbies = ["–°–∞–¥–æ–≤–æ–¥—Å—Ç–≤–æ", "–ö—É–ª–∏–Ω–∞—Ä–∏—è", "–†–µ–º–æ–Ω—Ç —Ç–µ—Ö–Ω–∏–∫–∏", "–ß—Ç–µ–Ω–∏–µ", "–°–ø–æ—Ä—Ç"];
        const luggage = ["–ê–ø—Ç–µ—á–∫–∞", "–ö–æ–Ω—Å–µ—Ä–≤—ã", "–í–æ–¥–∞", "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã", "–ö–Ω–∏–≥–∏", "–û—Ä—É–∂–∏–µ"];
        const phobias = ["–ê—Ä–∞—Ö–Ω–æ—Ñ–æ–±–∏—è", "–ö–ª–∞—É—Å—Ç—Ä–æ—Ñ–æ–±–∏—è", "–ê–≥–æ—Ä–∞—Ñ–æ–±–∏—è", "–ê–∫—Ä–æ—Ñ–æ–±–∏—è"];
        const characters = ["–î–æ–±—Ä—ã–π", "–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π", "–≠–≥–æ–∏—Å—Ç–∏—á–Ω—ã–π", "–ê–ª—å—Ç—Ä—É–∏—Å—Ç", "–õ–∏–¥–µ—Ä"];
        const additionalInfo = ["–ò–º–µ–µ—Ç –≤–æ–µ–Ω–Ω—É—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É", "–ó–Ω–∞–µ—Ç –æ—Å–Ω–æ–≤—ã –º–µ–¥–∏—Ü–∏–Ω—ã", "–£–º–µ–µ—Ç –≤—ã—Ä–∞—â–∏–≤–∞—Ç—å —Ä–∞—Å—Ç–µ–Ω–∏—è", "–†–∞–∑–±–∏—Ä–∞–µ—Ç—Å—è –≤ —Ç–µ—Ö–Ω–∏–∫–µ"];
        
        const specialCards = [
            { name: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≥–æ–ª–æ—Å", description: "–í–∞—à –≥–æ–ª–æ—Å —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞ –¥–≤–∞" },
            { name: "–ò–º–º—É–Ω–∏—Ç–µ—Ç", description: "–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –±—ã—Ç—å –∏—Å–∫–ª—é—á–µ–Ω—ã" },
            { name: "–û–±–º–µ–Ω —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏", description: "–ü–æ–º–µ–Ω—è–π—Ç–µ—Å—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–æ–π —Å –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–æ–º" },
            { name: "–†–µ–≤–∏–∑–∏—è", description: "–û—Ç–º–µ–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è" }
        ];
        
        const situations = [
            "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —É—Ç–µ—á–∫–∞ —Ä–∞–¥–∏–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –∏–∑ –æ—Ç—Å–µ–∫–æ–≤. –ö—Ç–æ-—Ç–æ –¥–æ–ª–∂–µ–Ω –ø–æ—á–∏–Ω–∏—Ç—å –µ–≥–æ, —Ä–∏—Å–∫—É—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ–∑—É –æ–±–ª—É—á–µ–Ω–∏—è.",
            "–ó–∞–ø–∞—Å—ã –ø—Ä–æ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –∏—Å–ø–æ—Ä—á–µ–Ω—ã. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤–∏–Ω–æ–≤–Ω–æ–≥–æ –∏–ª–∏ —Å–ø–æ—Å–æ–± –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∞—Å—ã.",
            "–û–±–Ω–∞—Ä—É–∂–µ–Ω –±–æ–ª—å–Ω–æ–π —Å –∑–∞—Ä–∞–∑–Ω—ã–º –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–µ–º. –ù—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å, –∫–∞–∫ –ø–æ—Å—Ç—É–ø–∏—Ç—å —Å –Ω–∏–º.",
            "–°–∏—Å—Ç–µ–º–∞ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ –≤—ã—à–ª–∞ –∏–∑ —Å—Ç—Ä–æ—è. –ë–µ–∑ –∫–∏—Å–ª–æ—Ä–æ–¥–∞ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∞ 2 –¥–Ω—è."
        ];

        // –ü–æ—Ä—è–¥–æ–∫ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–æ –∫—Ä—É–≥–∞–º
        const roundAttributes = [
            ['profession'], // –ö—Ä—É–≥ 1
            ['health', 'biology'], // –ö—Ä—É–≥ 2
            ['hobby', 'luggage'], // –ö—Ä—É–≥ 3
            ['phobia', 'character'], // –ö—Ä—É–≥ 4
            ['additionalInfo'] // –ö—Ä—É–≥ 5
        ];
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            currentUser: null,
            roomCode: null,
            players: [],
            gameStarted: false,
            currentSituation: 0,
            playerId: null,
            currentRound: 1,
            myPlayer: null
        };
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const authScreen = document.getElementById('auth-screen');
        const lobbyScreen = document.getElementById('lobby-screen');
        const gameScreen = document.getElementById('game-screen');
        const voteScreen = document.getElementById('vote-screen');
        
        const userDisplay = document.getElementById('user-display');
        const logoutBtn = document.getElementById('logout-btn');
        
        const roomCodeDisplay = document.getElementById('room-code');
        const playersGrid = document.getElementById('players-grid');
        const gamePlayersGrid = document.getElementById('game-players-grid');
        const votePlayersGrid = document.getElementById('vote-players-grid');
        const myAttributesContainer = document.getElementById('my-attributes');
        const roundInfo = document.getElementById('round-info');
        const roundAttributesContainer = document.getElementById('round-attributes');
        
        const readyBtn = document.getElementById('ready-btn');
        const startGameBtn = document.getElementById('start-game-btn');
        const leaveRoomBtn = document.getElementById('leave-room-btn');
        const nextRoundBtn = document.getElementById('next-round-btn');
        const gameVoteBtn = document.getElementById('game-vote-btn');
        const confirmVoteBtn = document.getElementById('confirm-vote-btn');
        const cancelVoteBtn = document.getElementById('cancel-vote-btn');
        
        const currentSituationElement = document.getElementById('current-situation');
        const cardsContainer = document.getElementById('cards-container');
        
        const lobbyChat = document.getElementById('lobby-chat');
        const lobbyChatInput = document.getElementById('lobby-chat-input');
        const lobbyChatSend = document.getElementById('lobby-chat-send');
        
        const gameChat = document.getElementById('game-chat');
        const gameChatInput = document.getElementById('game-chat-input');
        const gameChatSend = document.getElementById('game-chat-send');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –≤–∫–ª–∞–¥–æ–∫
        const tabCreate = document.getElementById('tab-create');
        const tabJoin = document.getElementById('tab-join');
        const createTab = document.getElementById('create-tab');
        const joinTab = document.getElementById('join-tab');
        const usernameCreate = document.getElementById('username-create');
        const usernameJoin = document.getElementById('username-join');
        const roomCodeInput = document.getElementById('room-code-input');
        const createRoomBtn = document.getElementById('create-room-btn');
        const joinRoomBtn = document.getElementById('join-room-btn');

        // WebSocket —Å–æ–±—ã—Ç–∏—è
        socket.on('connect', () => {
            console.log('Connected to server');
            addSystemMessage('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ä–≤–µ—Ä—É', 'lobby');
        });

        socket.on('disconnect', () => {
            addSystemMessage('–û—Ç–∫–ª—é—á–µ–Ω–æ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞', 'lobby');
        });
        
        socket.on('room_created', (data) => {
            gameState.roomCode = data.roomCode;
            gameState.playerId = data.playerId;
            roomCodeDisplay.textContent = data.roomCode;
            addSystemMessage(`–ö–æ–º–Ω–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞! –ö–æ–¥: ${data.roomCode}`, 'lobby');
        });
        
        socket.on('room_joined', (data) => {
            gameState.roomCode = data.roomCode;
            gameState.playerId = data.playerId;
            roomCodeDisplay.textContent = data.roomCode;
            addSystemMessage(`–í—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –∫–æ–º–Ω–∞—Ç–µ ${data.roomCode}`, 'lobby');
        });
        
        socket.on('players_update', (players) => {
            console.log('Players update received:', players);
            gameState.players = players.map(p => ({
                ...p,
                isCurrentUser: p.id === gameState.playerId
            }));
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–≤–æ–µ–≥–æ –∏–≥—Ä–æ–∫–∞
            gameState.myPlayer = gameState.players.find(p => p.isCurrentUser);
            
            renderPlayers();
            renderMyCards();
        });
        
        socket.on('player_joined', (data) => {
            addSystemMessage(`–ò–≥—Ä–æ–∫ ${data.username} –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ`, 'lobby');
        });
        
        socket.on('player_left', (data) => {
            addSystemMessage(`–ò–≥—Ä–æ–∫ ${data.username} –ø–æ–∫–∏–Ω—É–ª –∫–æ–º–Ω–∞—Ç—É`, 'lobby');
        });
        
        socket.on('attribute_revealed', (data) => {
            const player = gameState.players.find(p => p.id === data.playerId);
            if (player) {
                player.revealed[data.attribute] = true;
                renderPlayers();
                if (!player.isCurrentUser) {
                    addSystemMessage(`${player.username} —Ä–∞—Å–∫—Ä—ã–ª(–∞) —Å–≤–æ—é ${getAttributeName(data.attribute)}`, 'game');
                }
            }
        });
        
        socket.on('game_started', () => {
            gameState.gameStarted = true;
            gameState.currentRound = 1;
            lobbyScreen.classList.remove('active');
            gameScreen.classList.add('active');
            renderPlayers();
            renderMyCards();
            renderSpecialCards();
            updateRoundInfo();
            addSystemMessage('–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!', 'game');
        });

        socket.on('next_round', (data) => {
            gameState.currentRound = data.round;
            updateRoundInfo();
            renderMyCards();
            renderPlayers();
            addSystemMessage(`–ù–∞—á–∞–ª—Å—è –∫—Ä—É–≥ ${gameState.currentRound}`, 'game');
        });
        
        socket.on('chat_message', (data) => {
            addChatMessage(data.username, data.message, data.context);
        });

        socket.on('error', (data) => {
            alert('–û—à–∏–±–∫–∞: ' + data.message);
            authScreen.classList.add('active');
            lobbyScreen.classList.remove('active');
        });
        
        // –§—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã
        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function updateRoundInfo() {
            const currentAttributes = roundAttributes[gameState.currentRound - 1];
            const attributeNames = currentAttributes.map(attr => getAttributeName(attr)).join(', ');
            roundInfo.textContent = `–ö—Ä—É–≥ ${gameState.currentRound}: –û—Ç–∫—Ä—ã—Ç—ã ${attributeNames}`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
            roundAttributesContainer.innerHTML = '';
            
            roundAttributes.forEach((roundAttrs, index) => {
                const roundNumber = index + 1;
                roundAttrs.forEach(attr => {
                    const attrElement = document.createElement('div');
                    attrElement.className = `round-attribute ${roundNumber === gameState.currentRound ? 'active' : ''}`;
                    attrElement.textContent = getAttributeName(attr);
                    roundAttributesContainer.appendChild(attrElement);
                });
            });
        }

        function canRevealAttribute(attribute) {
            if (!gameState.myPlayer) return false;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å —ç—Ç—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –≤ —Ç–µ–∫—É—â–µ–º –∫—Ä—É–≥–µ
            const currentRoundAttributes = roundAttributes[gameState.currentRound - 1];
            return currentRoundAttributes.includes(attribute);
        }
        
        function renderPlayers() {
            playersGrid.innerHTML = '';
            gamePlayersGrid.innerHTML = '';
            
            gameState.players.forEach(player => {
                const playerCard = createPlayerCard(player, 'lobby');
                playersGrid.appendChild(playerCard);
                
                if (gameState.gameStarted) {
                    const gamePlayerCard = createPlayerCard(player, 'game');
                    gamePlayersGrid.appendChild(gamePlayerCard);
                }
            });
            
            const currentPlayer = gameState.players.find(p => p.isCurrentUser);
            const allReady = gameState.players.length > 0 && gameState.players.every(p => p.ready);
            const minPlayers = gameState.players.length >= 3;
            
            if (currentPlayer && currentPlayer.isHost && allReady && minPlayers) {
                startGameBtn.style.display = 'block';
            } else {
                startGameBtn.style.display = 'none';
            }
        }

        function renderMyCards() {
            if (!gameState.myPlayer) return;
            
            myAttributesContainer.innerHTML = '';
            
            const attributes = [
                { key: 'profession', name: '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è', icon: 'fas fa-briefcase' },
                { key: 'health', name: '–ó–¥–æ—Ä–æ–≤—å–µ', icon: 'fas fa-heartbeat' },
                { key: 'biology', name: '–ë–∏–æ–ª–æ–≥–∏—è', icon: 'fas fa-dna' },
                { key: 'hobby', name: '–•–æ–±–±–∏', icon: 'fas fa-puzzle-piece' },
                { key: 'luggage', name: '–ë–∞–≥–∞–∂', icon: 'fas fa-suitcase' },
                { key: 'phobia', name: '–§–æ–±–∏—è', icon: 'fas fa-ghost' },
                { key: 'character', name: '–•–∞—Ä–∞–∫—Ç–µ—Ä', icon: 'fas fa-user' },
                { key: 'additionalInfo', name: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ', icon: 'fas fa-info-circle' }
            ];
            
            attributes.forEach(attr => {
                const isRevealed = gameState.myPlayer.revealed[attr.key];
                const canReveal = canRevealAttribute(attr.key);
                const value = isRevealed ? gameState.myPlayer[attr.key] : '???';
                
                const attributeElement = document.createElement('div');
                attributeElement.className = `my-attribute ${isRevealed ? 'revealed' : ''} ${!canReveal && !isRevealed ? 'locked' : ''}`;
                
                attributeElement.innerHTML = `
                    <div class="attribute-name">
                        <i class="${attr.icon}"></i> ${attr.name}
                    </div>
                    <div class="attribute-value">${value}</div>
                    ${!isRevealed && canReveal ? 
                        `<button class="reveal-btn" data-attribute="${attr.key}"><i class="fas fa-eye"></i></button>` : 
                        (!isRevealed ? `<button class="reveal-btn" disabled><i class="fas fa-lock"></i></button>` : '')
                    }
                `;
                
                myAttributesContainer.appendChild(attributeElement);
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è
            myAttributesContainer.querySelectorAll('.reveal-btn:not(:disabled)').forEach(btn => {
                btn.addEventListener('click', function() {
                    const attribute = this.dataset.attribute;
                    revealAttribute(gameState.myPlayer.id, attribute);
                });
            });
        }
        
        function createPlayerCard(player, context) {
            const card = document.createElement('div');
            card.className = `player-card ${player.ready ? 'ready' : ''}`;
            card.dataset.playerId = player.id;
            
            let attributesHTML = '';
            const attributes = [
                { key: 'profession', name: '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è', icon: 'fas fa-briefcase' },
                { key: 'health', name: '–ó–¥–æ—Ä–æ–≤—å–µ', icon: 'fas fa-heartbeat' },
                { key: 'biology', name: '–ë–∏–æ–ª–æ–≥–∏—è', icon: 'fas fa-dna' },
                { key: 'hobby', name: '–•–æ–±–±–∏', icon: 'fas fa-puzzle-piece' },
                { key: 'luggage', name: '–ë–∞–≥–∞–∂', icon: 'fas fa-suitcase' },
                { key: 'phobia', name: '–§–æ–±–∏—è', icon: 'fas fa-ghost' },
                { key: 'character', name: '–•–∞—Ä–∞–∫—Ç–µ—Ä', icon: 'fas fa-user' },
                { key: 'additionalInfo', name: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ', icon: 'fas fa-info-circle' }
            ];
            
            attributes.forEach(attr => {
                const isRevealed = player.revealed[attr.key];
                const value = isRevealed ? player[attr.key] : '???';
                
                attributesHTML += `
                    <div class="attribute ${isRevealed ? '' : 'hidden'}">
                        <span class="attribute-name"><i class="${attr.icon}"></i> ${attr.name}:</span>
                        <span class="attribute-value">${value}</span>
                    </div>
                `;
            });
            
            card.innerHTML = `
                <div class="player-header">
                    <div class="player-name">${player.username} ${player.isCurrentUser ? '(–í—ã)' : ''} ${player.isHost ? 'üëë' : ''}</div>
                    <div class="player-status ${player.ready ? 'ready' : ''}">${player.ready ? '–ì–æ—Ç–æ–≤' : '–ù–µ –≥–æ—Ç–æ–≤'}</div>
                </div>
                <div class="attributes-list">
                    ${attributesHTML}
                </div>
            `;
            
            return card;
        }
        
        function revealAttribute(playerId, attribute) {
            const player = gameState.players.find(p => p.id === playerId);
            if (player && player.isCurrentUser && canRevealAttribute(attribute)) {
                player.revealed[attribute] = true;
                renderPlayers();
                renderMyCards();
                socket.emit('reveal_attribute', {
                    attribute: attribute
                });
                addSystemMessage(`–í—ã —Ä–∞—Å–∫—Ä—ã–ª–∏ —Å–≤–æ—é ${getAttributeName(attribute)}`, 'game');
            }
        }
        
        function getAttributeName(key) {
            const names = {
                profession: '–ø—Ä–æ—Ñ–µ—Å—Å–∏—é',
                health: '–∑–¥–æ—Ä–æ–≤—å–µ',
                biology: '–±–∏–æ–ª–æ–≥–∏—é',
                hobby: '—Ö–æ–±–±–∏',
                luggage: '–±–∞–≥–∞–∂',
                phobia: '—Ñ–æ–±–∏—é',
                character: '—Ö–∞—Ä–∞–∫—Ç–µ—Ä',
                additionalInfo: '–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é'
            };
            return names[key] || key;
        }
        
        function addSystemMessage(text, context) {
            const message = document.createElement('div');
            message.className = 'message system';
            message.textContent = text;
            
            if (context === 'lobby') {
                lobbyChat.appendChild(message);
                lobbyChat.scrollTop = lobbyChat.scrollHeight;
            } else {
                gameChat.appendChild(message);
                gameChat.scrollTop = gameChat.scrollHeight;
            }
        }
        
        function addChatMessage(sender, text, context) {
            const message = document.createElement('div');
            message.className = 'message';
            message.innerHTML = `<span class="message-sender">${sender}:</span> ${text}`;
            
            if (context === 'lobby') {
                lobbyChat.appendChild(message);
                lobbyChat.scrollTop = lobbyChat.scrollHeight;
            } else {
                gameChat.appendChild(message);
                gameChat.scrollTop = gameChat.scrollHeight;
            }
        }
        
        function renderSpecialCards() {
            cardsContainer.innerHTML = '';
            
            const selectedCards = [];
            while (selectedCards.length < 2) {
                const card = getRandomItem(specialCards);
                if (!selectedCards.includes(card)) {
                    selectedCards.push(card);
                }
            }
            
            selectedCards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.innerHTML = `
                    <div class="card-title">${card.name}</div>
                    <div class="card-description">${card.description}</div>
                `;
                cardElement.addEventListener('click', function() {
                    useCard(card);
                });
                cardsContainer.appendChild(cardElement);
            });
        }
        
        function useCard(card) {
            alert(`–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–∞—Ä—Ç–∞: ${card.name}\n${card.description}`);
            addSystemMessage(`–ò–≥—Ä–æ–∫ ${gameState.currentUser} –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫–∞—Ä—Ç—É "${card.name}"`, 'game');
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        tabCreate.addEventListener('click', function() {
            tabCreate.classList.add('active');
            tabJoin.classList.remove('active');
            createTab.style.display = 'block';
            joinTab.style.display = 'none';
        });

        tabJoin.addEventListener('click', function() {
            tabJoin.classList.add('active');
            tabCreate.classList.remove('active');
            joinTab.style.display = 'block';
            createTab.style.display = 'none';
        });

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
        createRoomBtn.addEventListener('click', function() {
            const username = usernameCreate.value.trim();
            if (username.length < 2) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)');
                return;
            }
            
            gameState.currentUser = username;
            userDisplay.textContent = username;
            userDisplay.style.display = 'block';
            logoutBtn.style.display = 'block';
            
            socket.emit('create_room', username);
            
            authScreen.classList.remove('active');
            lobbyScreen.classList.add('active');
        });

        // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
        joinRoomBtn.addEventListener('click', function() {
            const username = usernameJoin.value.trim();
            const roomCode = roomCodeInput.value.trim().toUpperCase();
            
            if (username.length < 2) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)');
                return;
            }
            
            if (roomCode.length < 4) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã (–º–∏–Ω–∏–º—É–º 4 —Å–∏–º–≤–æ–ª–∞)');
                return;
            }
            
            gameState.currentUser = username;
            userDisplay.textContent = username;
            userDisplay.style.display = 'block';
            logoutBtn.style.display = 'block';
            
            socket.emit('join_room', { roomCode, username });
            
            authScreen.classList.remove('active');
            lobbyScreen.classList.add('active');
        });
        
        logoutBtn.addEventListener('click', function() {
            socket.emit('leave_room');
            gameState.currentUser = null;
            gameState.players = [];
            gameState.gameStarted = false;
            gameState.currentRound = 1;
            gameState.myPlayer = null;
            
            userDisplay.style.display = 'none';
            logoutBtn.style.display = 'none';
            
            lobbyScreen.classList.remove('active');
            gameScreen.classList.remove('active');
            voteScreen.classList.remove('active');
            authScreen.classList.add('active');
            
            usernameCreate.value = '';
            usernameJoin.value = '';
            roomCodeInput.value = '';
        });
        
        readyBtn.addEventListener('click', function() {
            socket.emit('toggle_ready');
        });
        
        startGameBtn.addEventListener('click', function() {
            socket.emit('start_game');
        });

        nextRoundBtn.addEventListener('click', function() {
            socket.emit('next_round');
        });
        
        leaveRoomBtn.addEventListener('click', function() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É?')) {
                logoutBtn.click();
            }
        });
        
        gameVoteBtn.addEventListener('click', function() {
            gameScreen.classList.remove('active');
            voteScreen.classList.add('active');
            renderVotePlayers();
        });
        
        function renderVotePlayers() {
            votePlayersGrid.innerHTML = '';
            
            gameState.players.forEach(player => {
                const card = document.createElement('div');
                card.className = 'player-card';
                card.innerHTML = `
                    <div class="player-header">
                        <div class="player-name">${player.username} ${player.isCurrentUser ? '(–í—ã)' : ''}</div>
                    </div>
                    <div class="attributes-list">
                        <div class="attribute">
                            <span class="attribute-name"><i class="fas fa-briefcase"></i> –ü—Ä–æ—Ñ–µ—Å—Å–∏—è:</span>
                            <span class="attribute-value">${player.profession}</span>
                        </div>
                        <div class="attribute">
                            <span class="attribute-name"><i class="fas fa-heartbeat"></i> –ó–¥–æ—Ä–æ–≤—å–µ:</span>
                            <span class="attribute-value">${player.health}</span>
                        </div>
                        <div class="attribute">
                            <span class="attribute-name"><i class="fas fa-dna"></i> –ë–∏–æ–ª–æ–≥–∏—è:</span>
                            <span class="attribute-value">${player.biology}</span>
                        </div>
                    </div>
                    <button class="btn vote-player-btn" data-player-id="${player.id}" ${player.isCurrentUser ? 'disabled' : ''}>
                        <i class="fas fa-user-minus"></i> –ò—Å–∫–ª—é—á–∏—Ç—å
                    </button>
                `;
                votePlayersGrid.appendChild(card);
            });
            
            document.querySelectorAll('.vote-player-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const playerId = this.dataset.playerId;
                    socket.emit('cast_vote', { targetPlayerId: playerId });
                    alert('–í–∞—à –≥–æ–ª–æ—Å —É—á—Ç–µ–Ω!');
                    voteScreen.classList.remove('active');
                    gameScreen.classList.add('active');
                });
            });
        }
        
        confirmVoteBtn.addEventListener('click', function() {
            voteScreen.classList.remove('active');
            gameScreen.classList.add('active');
        });
        
        cancelVoteBtn.addEventListener('click', function() {
            voteScreen.classList.remove('active');
            gameScreen.classList.add('active');
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —á–∞—Ç–∞
        function setupChatHandlers() {
            lobbyChatSend.addEventListener('click', sendLobbyMessage);
            lobbyChatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendLobbyMessage();
            });
            
            gameChatSend.addEventListener('click', sendGameMessage);
            gameChatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendGameMessage();
            });
        }
        
        function sendLobbyMessage() {
            const message = lobbyChatInput.value.trim();
            if (message && gameState.currentUser) {
                socket.emit('chat_message', {
                    message: message,
                    context: 'lobby'
                });
                lobbyChatInput.value = '';
            }
        }
        
        function sendGameMessage() {
            const message = gameChatInput.value.trim();
            if (message && gameState.currentUser) {
                socket.emit('chat_message', {
                    message: message,
                    context: 'game'
                });
                gameChatInput.value = '';
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        setupChatHandlers();
        
        // –î–ª—è –¥–µ–º–æ - —Å—Ä–∞–∑—É –∑–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª–µ
        usernameCreate.value = '–ò–≥—Ä–æ–∫' + Math.floor(Math.random() * 1000);
        usernameJoin.value = '–ò–≥—Ä–æ–∫' + Math.floor(Math.random() * 1000);
    </script>
</body>
</html>
