<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë—É–Ω–∫–µ—Ä 42 - –û–Ω–ª–∞–π–Ω –∏–≥—Ä–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        :root {
            --primary: #0c0c1d;
            --secondary: #1a1a2e;
            --accent: #16213e;
            --highlight: #e94560;
            --success: #00b894;
            --warning: #fdcb6e;
            --danger: #e84393;
            --text: #ffffff;
            --text-secondary: #b2bec3;
            --card-bg: rgba(255, 255, 255, 0.08);
            --card-hover: rgba(255, 255, 255, 0.12);
            --border: rgba(255, 255, 255, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            background-attachment: fixed;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: rgba(10, 10, 25, 0.95);
            backdrop-filter: blur(20px);
            padding: 1rem 0;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(45deg, var(--highlight), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .username {
            background: var(--accent);
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: 600;
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .main-content {
            padding: 2rem 0;
            min-height: calc(100vh - 140px);
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block;
        }
        
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: linear-gradient(45deg, var(--highlight), var(--danger));
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(233, 69, 96, 0.4);
        }
        
        .btn-secondary {
            background: var(--card-bg);
            border: 1px solid var(--border);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-secondary:hover {
            background: var(--card-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(45deg, var(--success), #00a085);
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
        }
        
        .auth-screen {
            max-width: 440px;
            margin: 0 auto;
            text-align: center;
        }
        
        .auth-card {
            padding: 3rem;
        }
        
        .auth-card h2 {
            margin-bottom: 2rem;
            font-size: 1.8rem;
            background: linear-gradient(45deg, var(--highlight), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-secondary);
        }
        
        .form-group input {
            width: 100%;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--highlight);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 2rem;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 4px;
            border: 1px solid var(--border);
        }
        
        .tab-btn {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 8px;
            font-weight: 600;
        }
        
        .tab-btn.active {
            background: linear-gradient(45deg, var(--highlight), var(--danger));
            color: white;
            box-shadow: 0 2px 8px rgba(233, 69, 96, 0.3);
        }
        
        .lobby-screen {
            text-align: center;
        }
        
        .lobby-header {
            margin-bottom: 3rem;
        }
        
        .lobby-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--highlight), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .room-code {
            background: var(--accent);
            padding: 12px 24px;
            border-radius: 12px;
            display: inline-block;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            letter-spacing: 2px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }
        
        .player-card {
            padding: 1.8rem;
            text-align: left;
        }
        
        .player-card.ready {
            border-color: var(--success);
            box-shadow: 0 8px 32px rgba(0, 184, 148, 0.2);
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }
        
        .player-name {
            font-weight: 700;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .player-status {
            font-size: 0.8rem;
            padding: 6px 12px;
            border-radius: 20px;
            background: var(--card-bg);
            font-weight: 600;
        }
        
        .player-status.ready {
            background: var(--success);
            color: white;
        }
        
        .attributes-list {
            margin-top: 1rem;
        }
        
        .attribute {
            margin-bottom: 0.8rem;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid transparent;
        }
        
        .attribute.hidden {
            background: rgba(255, 255, 255, 0.02);
            color: var(--text-secondary);
        }
        
        .attribute.hidden .attribute-value {
            filter: blur(4px);
            user-select: none;
        }
        
        .attribute-name {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .game-screen {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .situation-container {
            padding: 2rem;
            border-left: 4px solid var(--highlight);
        }
        
        .situation-title {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--highlight);
            font-weight: 700;
        }
        
        .round-info {
            background: var(--accent);
            padding: 12px 24px;
            border-radius: 12px;
            margin: 1rem 0;
            display: inline-block;
            border: 1px solid var(--border);
            font-weight: 600;
        }
        
        .my-cards-container {
            padding: 2rem;
            border: 2px solid var(--highlight);
            background: linear-gradient(135deg, var(--card-bg), rgba(233, 69, 96, 0.1));
        }
        
        .my-cards-title {
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            color: var(--highlight);
            text-align: center;
            font-weight: 700;
        }
        
        .my-attributes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
        }
        
        .my-attribute {
            background: rgba(255,255,255,0.05);
            padding: 12px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }
        
        .my-attribute.revealed {
            background: rgba(0, 184, 148, 0.15);
            border-color: var(--success);
        }
        
        .my-attribute:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-2px);
        }
        
        .round-attributes {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 1.5rem 0;
            justify-content: center;
        }
        
        .round-attribute {
            padding: 8px 16px;
            background: var(--card-bg);
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid var(--border);
            font-weight: 600;
        }
        
        .round-attribute.active {
            background: linear-gradient(45deg, var(--highlight), var(--danger));
            color: white;
            box-shadow: 0 2px 8px rgba(233, 69, 96, 0.3);
        }
        
        .table-section-title {
            font-size: 1.6rem;
            margin: 2rem 0 1.5rem 0;
            color: var(--highlight);
            text-align: center;
            font-weight: 700;
        }
        
        .attributes-table-container {
            padding: 2rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }
        
        .attributes-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 900px;
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .attributes-table th {
            background: var(--accent);
            padding: 16px 12px;
            text-align: center;
            font-weight: 700;
            border: 1px solid var(--border);
            position: sticky;
            top: 0;
        }
        
        .attributes-table td {
            padding: 14px 12px;
            border: 1px solid var(--border);
            text-align: center;
            vertical-align: middle;
            transition: all 0.3s;
        }
        
        .player-name-cell {
            background: var(--accent);
            font-weight: 700;
            text-align: left;
            position: sticky;
            left: 0;
            min-width: 140px;
            border-right: 2px solid var(--highlight);
        }
        
        .attribute-cell {
            background: rgba(255,255,255,0.03);
        }
        
        .attribute-cell.revealed {
            background: rgba(0, 184, 148, 0.1);
        }
        
        .attribute-cell.hidden {
            background: rgba(255,255,255,0.01);
            color: var(--text-secondary);
        }
        
        .attribute-cell.hidden .attribute-value {
            filter: blur(4px);
            user-select: none;
        }
        
        .attribute-value {
            font-size: 0.9rem;
            line-height: 1.4;
            font-weight: 500;
        }
        
        .reveal-table-btn {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            width: 28px;
            height: 28px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.8rem;
            margin-left: 6px;
            border: 1px solid var(--border);
        }
        
        .reveal-table-btn:hover {
            background: var(--highlight);
            transform: scale(1.1);
        }
        
        .vote-screen {
            text-align: center;
        }
        
        .vote-screen h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--highlight), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .vote-instruction {
            margin-bottom: 2rem;
            font-size: 1.3rem;
            color: var(--text-secondary);
        }
        
        .vote-info {
            background: var(--warning);
            padding: 12px 24px;
            border-radius: 12px;
            margin: 1rem 0;
            display: inline-block;
            border: 1px solid var(--border);
            color: var(--primary);
            font-weight: 600;
        }
        
        .chat-container {
            padding: 2rem;
            margin-top: 2rem;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .chat-container h3 {
            margin-bottom: 1.5rem;
            color: var(--highlight);
            font-weight: 700;
        }
        
        .chat-messages {
            margin-bottom: 1.5rem;
            min-height: 250px;
            max-height: 250px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
            background: var(--card-bg);
            border-radius: 3px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: var(--highlight);
            border-radius: 3px;
        }
        
        .chat-input {
            display: flex;
            gap: 12px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
        }
        
        .chat-input input:focus {
            outline: none;
            border-color: var(--highlight);
        }
        
        .chat-input button {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 0 20px;
            cursor: pointer;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }
        
        .chat-input button:hover {
            background: var(--highlight);
        }
        
        .message {
            margin-bottom: 1rem;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid var(--border);
        }
        
        .message.system {
            background: rgba(233, 69, 96, 0.15);
            border-color: rgba(233, 69, 96, 0.3);
            font-style: italic;
        }
        
        .message-sender {
            font-weight: 700;
            color: var(--highlight);
        }
        
        footer {
            background: var(--secondary);
            padding: 2rem 0;
            text-align: center;
            margin-top: 3rem;
            border-top: 1px solid var(--border);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .game-controls {
                flex-direction: column;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .my-attributes {
                grid-template-columns: 1fr;
            }
            
            .auth-card {
                padding: 2rem;
            }
            
            .attributes-table-container {
                padding: 1rem;
            }
            
            .attributes-table {
                font-size: 0.8rem;
            }
            
            .attributes-table th,
            .attributes-table td {
                padding: 10px 6px;
            }
            
            .lobby-header h1 {
                font-size: 2rem;
            }
            
            .vote-screen h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-radiation-alt"></i>
                    –ë—É–Ω–∫–µ—Ä 42
                </div>
                <div class="user-info">
                    <div id="user-display" class="username" style="display: none;"></div>
                    <button id="logout-btn" class="btn btn-secondary" style="display: none; padding: 10px 20px;">
                        <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <main class="main-content">
        <div class="container">
            <div id="auth-screen" class="screen active">
                <div class="auth-screen">
                    <div class="auth-card card">
                        <h2><i class="fas fa-user-shield"></i> –í—Ö–æ–¥ –≤ –ë—É–Ω–∫–µ—Ä 42</h2>
                        <div class="tabs">
                            <button id="tab-create" class="tab-btn active">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
                            <button id="tab-join" class="tab-btn">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                        </div>
                        <div id="create-tab" class="tab-content">
                            <div class="form-group">
                                <label for="username-create">–í–∞—à –Ω–∏–∫–Ω–µ–π–º:</label>
                                <input type="text" id="username-create" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
                            </div>
                            <button id="create-room-btn" class="btn">
                                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
                            </button>
                        </div>
                        <div id="join-tab" class="tab-content" style="display: none;">
                            <div class="form-group">
                                <label for="username-join">–í–∞—à –Ω–∏–∫–Ω–µ–π–º:</label>
                                <input type="text" id="username-join" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
                            </div>
                            <div class="form-group">
                                <label for="room-code-input">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</label>
                                <input type="text" id="room-code-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã" maxlength="8" style="text-transform: uppercase;">
                            </div>
                            <button id="join-room-btn" class="btn">
                                <i class="fas fa-sign-in-alt"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                            </button>
                        </div>
                        <div style="margin-top: 2rem; font-size: 0.9rem; color: var(--text-secondary);">
                            <p>üéÆ –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É –∏–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –¥–ª—è –∏–≥—Ä—ã —Å –¥—Ä—É–∑—å—è–º–∏</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="lobby-screen" class="screen">
                <div class="lobby-screen">
                    <div class="lobby-header">
                        <h1>üéØ –ö–æ–º–Ω–∞—Ç–∞ –∏–≥—Ä—ã</h1>
                        <div class="room-code">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã: <span id="room-code">BUNK42</span></div>
                        <p style="color: var(--text-secondary); margin-top: 1rem;">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∫–æ–¥–æ–º —Å –¥—Ä—É–∑—å—è–º–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –∏–≥—Ä–µ</p>
                    </div>
                    <div class="players-grid" id="players-grid"></div>
                    <div class="game-controls">
                        <button id="ready-btn" class="btn btn-secondary">
                            <i class="fas fa-check"></i> –ì–æ—Ç–æ–≤
                        </button>
                        <button id="start-game-btn" class="btn" style="display: none;">
                            <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                        </button>
                        <button id="leave-room-btn" class="btn btn-secondary">
                            <i class="fas fa-door-open"></i> –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É
                        </button>
                    </div>
                    <div class="chat-container card">
                        <h3><i class="fas fa-comments"></i> –ß–∞—Ç –∫–æ–º–Ω–∞—Ç—ã</h3>
                        <div class="chat-messages" id="lobby-chat">
                            <div class="message system">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–Ω–∞—Ç—É! –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π —Å –ø–æ–º–æ—â—å—é –∫–æ–¥–∞ –∫–æ–º–Ω–∞—Ç—ã.</div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="lobby-chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                            <button id="lobby-chat-send"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="game-screen" class="screen">
                <div class="game-screen">
                    <div class="situation-container card">
                        <h2 class="situation-title">üìã –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è</h2>
                        <p id="current-situation">–Ø–¥–µ—Ä–Ω–∞—è –≤–æ–π–Ω–∞ —É–Ω–∏—á—Ç–æ–∂–∏–ª–∞ —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é. –í—ã –æ–∫–∞–∑–∞–ª–∏—Å—å –≤ –±—É–Ω–∫–µ—Ä–µ, —Å–ø–æ—Å–æ–±–Ω–æ–º –≤–º–µ—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ 3 —á–µ–ª–æ–≤–µ–∫. –†–µ—Å—É—Ä—Å–æ–≤ —Ö–≤–∞—Ç–∏—Ç –Ω–∞ 5 –ª–µ—Ç. –í–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–µ—à–∏—Ç—å, –∫—Ç–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –±—É–Ω–∫–µ—Ä–µ, –∞ –∫—Ç–æ –±—É–¥–µ—Ç –∏–∑–≥–Ω–∞–Ω –Ω–∞ –≤–µ—Ä–Ω—É—é —Å–º–µ—Ä—Ç—å.</p>
                        <div class="round-info" id="round-info">üéØ –ö—Ä—É–≥ 1: –û—Ç–∫—Ä—ã—Ç–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è</div>
                        <div class="round-attributes" id="round-attributes"></div>
                    </div>

                    <div class="my-cards-container card">
                        <h2 class="my-cards-title">üé¥ –ú–æ–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h2>
                        <div class="my-attributes" id="my-attributes"></div>
                    </div>

                    <h2 class="table-section-title">üìä –¢–∞–±–ª–∏—Ü–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫</h2>
                    <div class="attributes-table-container card">
                        <table class="attributes-table" id="attributes-table">
                            <thead>
                                <tr>
                                    <th>–ò–≥—Ä–æ–∫</th>
                                    <th>–ü—Ä–æ—Ñ–µ—Å—Å–∏—è</th>
                                    <th>–ó–¥–æ—Ä–æ–≤—å–µ</th>
                                    <th>–ë–∏–æ–ª–æ–≥–∏—è</th>
                                    <th>–•–æ–±–±–∏</th>
                                    <th>–ë–∞–≥–∞–∂</th>
                                    <th>–§–æ–±–∏—è</th>
                                    <th>–•–∞—Ä–∞–∫—Ç–µ—Ä</th>
                                    <th>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</th>
                                </tr>
                            </thead>
                            <tbody id="attributes-table-body"></tbody>
                        </table>
                    </div>
                    
                    <div class="game-controls">
                        <button id="reveal-profession-btn" class="btn" style="display: none;">
                            <i class="fas fa-eye"></i> –†–∞—Å–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏—é
                        </button>
                        <button id="continue-game-btn" class="btn btn-success" style="display: none;">
                            <i class="fas fa-forward"></i> –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É
                        </button>
                        <button id="start-vote-btn" class="btn" style="display: none;">
                            <i class="fas fa-vote-yea"></i> –ù–∞—á–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
                        </button>
                    </div>
                    
                    <div class="chat-container card">
                        <h3><i class="fas fa-comments"></i> –ò–≥—Ä–æ–≤–æ–π —á–∞—Ç</h3>
                        <div class="chat-messages" id="game-chat">
                            <div class="message system">üéÆ –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –û–±—Å—É–∂–¥–∞–π—Ç–µ, –∫—Ç–æ –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è –≤ –±—É–Ω–∫–µ—Ä–µ.</div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="game-chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                            <button id="game-chat-send"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="vote-screen" class="screen">
                <div class="vote-screen">
                    <h1>üó≥Ô∏è –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</h1>
                    <p class="vote-instruction">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –±—É–Ω–∫–µ—Ä–∞:</p>
                    <div class="vote-info" id="vote-info">‚ö†Ô∏è –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å! –ö–∞–∂–¥—ã–π –∫—Ä—É–≥ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –æ–¥–∏–Ω –∏–≥—Ä–æ–∫.</div>
                    <div class="players-grid" id="vote-players-grid"></div>
                    <div class="game-controls">
                        <button id="confirm-vote-btn" class="btn" style="display: none;">
                            <i class="fas fa-check"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≥–æ–ª–æ—Å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <p style="color: var(--text-secondary);">–ë—É–Ω–∫–µ—Ä 42 - –û–Ω–ª–∞–π–Ω –∏–≥—Ä–∞ –Ω–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ ¬© 2023</p>
        </div>
    </footer>

    <script>
        const SERVER_URL = 'https://bunker-server-uzz6.onrender.com';
        let socket;
        
        try {
            socket = io(SERVER_URL, {
                transports: ['websocket', 'polling'],
                timeout: 10000
            });
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:', error);
            alert('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É');
        }
        
        const roundAttributes = [
            ['profession'],
            ['health', 'biology'],
            ['hobby', 'luggage'],
            ['phobia', 'character'],
            ['additionalInfo']
        ];
        
        let gameState = {
            currentUser: null,
            roomCode: null,
            players: [],
            gameStarted: false,
            playerId: null,
            currentRound: 1,
            myPlayer: null,
            selectedVote: null
        };
        
        const authScreen = document.getElementById('auth-screen');
        const lobbyScreen = document.getElementById('lobby-screen');
        const gameScreen = document.getElementById('game-screen');
        const voteScreen = document.getElementById('vote-screen');
        const userDisplay = document.getElementById('user-display');
        const logoutBtn = document.getElementById('logout-btn');
        const roomCodeDisplay = document.getElementById('room-code');
        const playersGrid = document.getElementById('players-grid');
        const gamePlayersGrid = document.getElementById('game-players-grid');
        const votePlayersGrid = document.getElementById('vote-players-grid');
        const myAttributesContainer = document.getElementById('my-attributes');
        const roundInfo = document.getElementById('round-info');
        const roundAttributesContainer = document.getElementById('round-attributes');
        const voteInfo = document.getElementById('vote-info');
        const attributesTableBody = document.getElementById('attributes-table-body');
        const readyBtn = document.getElementById('ready-btn');
        const startGameBtn = document.getElementById('start-game-btn');
        const leaveRoomBtn = document.getElementById('leave-room-btn');
        const revealProfessionBtn = document.getElementById('reveal-profession-btn');
        const continueGameBtn = document.getElementById('continue-game-btn');
        const startVoteBtn = document.getElementById('start-vote-btn');
        const confirmVoteBtn = document.getElementById('confirm-vote-btn');
        const currentSituationElement = document.getElementById('current-situation');
        const lobbyChat = document.getElementById('lobby-chat');
        const lobbyChatInput = document.getElementById('lobby-chat-input');
        const lobbyChatSend = document.getElementById('lobby-chat-send');
        const gameChat = document.getElementById('game-chat');
        const gameChatInput = document.getElementById('game-chat-input');
        const gameChatSend = document.getElementById('game-chat-send');
        const tabCreate = document.getElementById('tab-create');
        const tabJoin = document.getElementById('tab-join');
        const createTab = document.getElementById('create-tab');
        const joinTab = document.getElementById('join-tab');
        const usernameCreate = document.getElementById('username-create');
        const usernameJoin = document.getElementById('username-join');
        const roomCodeInput = document.getElementById('room-code-input');
        const createRoomBtn = document.getElementById('create-room-btn');
        const joinRoomBtn = document.getElementById('join-room-btn');

        socket.on('connect', () => {
            console.log('Connected to server');
            addSystemMessage('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ä–≤–µ—Ä—É', 'lobby');
        });

        socket.on('disconnect', () => {
            addSystemMessage('–û—Ç–∫–ª—é—á–µ–Ω–æ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞', 'lobby');
        });
        
        socket.on('room_created', (data) => {
            gameState.roomCode = data.roomCode;
            gameState.playerId = data.playerId;
            roomCodeDisplay.textContent = data.roomCode;
            addSystemMessage(`–ö–æ–º–Ω–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞! –ö–æ–¥: ${data.roomCode}`, 'lobby');
        });
        
        socket.on('room_joined', (data) => {
            gameState.roomCode = data.roomCode;
            gameState.playerId = data.playerId;
            roomCodeDisplay.textContent = data.roomCode;
            addSystemMessage(`–í—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –∫–æ–º–Ω–∞—Ç–µ ${data.roomCode}`, 'lobby');
        });
        
        socket.on('players_update', (players) => {
            console.log('Players update received:', players);
            gameState.players = players.map(p => ({
                ...p,
                isCurrentUser: p.id === gameState.playerId
            }));
            
            gameState.myPlayer = gameState.players.find(p => p.isCurrentUser);
            
            renderPlayers();
            renderMyCards();
            renderAttributesTable();
            updateGameControls();
        });
        
        socket.on('player_joined', (data) => {
            addSystemMessage(`–ò–≥—Ä–æ–∫ ${data.username} –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ`, 'lobby');
        });
        
        socket.on('player_left', (data) => {
            addSystemMessage(`–ò–≥—Ä–æ–∫ ${data.username} –ø–æ–∫–∏–Ω—É–ª –∫–æ–º–Ω–∞—Ç—É`, 'lobby');
        });
        
        socket.on('attribute_revealed', (data) => {
            const player = gameState.players.find(p => p.id === data.playerId);
            if (player) {
                player.revealed[data.attribute] = true;
                renderPlayers();
                renderAttributesTable();
                if (!player.isCurrentUser) {
                    addSystemMessage(`${player.username} —Ä–∞—Å–∫—Ä—ã–ª(–∞) —Å–≤–æ—é ${getAttributeName(data.attribute)}`, 'game');
                }
            }
        });
        
        socket.on('game_started', () => {
            gameState.gameStarted = true;
            gameState.currentRound = 1;
            lobbyScreen.classList.remove('active');
            gameScreen.classList.add('active');
            renderPlayers();
            renderMyCards();
            renderAttributesTable();
            updateRoundInfo();
            updateGameControls();
            addSystemMessage('–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –ü–µ—Ä–≤—ã–π –∫—Ä—É–≥: —Ä–∞—Å–∫—Ä–æ–π—Ç–µ —Å–≤–æ—é –ø—Ä–æ—Ñ–µ—Å—Å–∏—é.', 'game');
        });

        socket.on('next_round', (data) => {
            gameState.currentRound = data.round;
            updateRoundInfo();
            renderMyCards();
            renderPlayers();
            renderAttributesTable();
            updateGameControls();
            addSystemMessage(`–ù–∞—á–∞–ª—Å—è –∫—Ä—É–≥ ${gameState.currentRound}`, 'game');
        });

        socket.on('start_voting', () => {
            gameScreen.classList.remove('active');
            voteScreen.classList.add('active');
            renderVotePlayers();
            addSystemMessage('–ù–∞—á–∞–ª–æ—Å—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ!', 'game');
        });

        socket.on('player_eliminated', (data) => {
            addSystemMessage(`–ò–≥—Ä–æ–∫ ${data.username} –∏—Å–∫–ª—é—á–µ–Ω –∏–∑ –±—É–Ω–∫–µ—Ä–∞!`, 'game');
            voteScreen.classList.remove('active');
            gameScreen.classList.add('active');
        });
        
        socket.on('chat_message', (data) => {
            addChatMessage(data.username, data.message, data.context);
        });

        socket.on('error', (data) => {
            alert('–û—à–∏–±–∫–∞: ' + data.message);
        });
        
        function updateRoundInfo() {
            const currentAttributes = roundAttributes[gameState.currentRound - 1];
            const attributeNames = currentAttributes.map(attr => getAttributeName(attr)).join(', ');
            roundInfo.textContent = `üéØ –ö—Ä—É–≥ ${gameState.currentRound}: ${attributeNames}`;
            
            roundAttributesContainer.innerHTML = '';
            
            roundAttributes.forEach((roundAttrs, index) => {
                const roundNumber = index + 1;
                roundAttrs.forEach(attr => {
                    const attrElement = document.createElement('div');
                    attrElement.className = `round-attribute ${roundNumber === gameState.currentRound ? 'active' : ''}`;
                    attrElement.textContent = getAttributeName(attr);
                    roundAttributesContainer.appendChild(attrElement);
                });
            });
        }

        function updateGameControls() {
            if (!gameState.gameStarted || !gameState.myPlayer) return;
            
            const isHost = gameState.myPlayer.isHost;
            const currentRound = gameState.currentRound;
            
            revealProfessionBtn.style.display = 'none';
            continueGameBtn.style.display = 'none';
            startVoteBtn.style.display = 'none';
            
            if (currentRound === 1) {
                if (!gameState.myPlayer.revealed.profession) {
                    revealProfessionBtn.style.display = 'block';
                } else if (isHost) {
                    continueGameBtn.style.display = 'block';
                }
            } else if (currentRound >= 2 && currentRound <= 4) {
                if (isHost) {
                    continueGameBtn.style.display = 'block';
                }
            } else if (currentRound === 5) {
                if (isHost) {
                    startVoteBtn.style.display = 'block';
                }
            }
        }
        
        function renderPlayers() {
            playersGrid.innerHTML = '';
            gamePlayersGrid.innerHTML = '';
            
            gameState.players.forEach(player => {
                const playerCard = createPlayerCard(player, 'lobby');
                playersGrid.appendChild(playerCard);
                
                if (gameState.gameStarted) {
                    const gamePlayerCard = createPlayerCard(player, 'game');
                    gamePlayersGrid.appendChild(gamePlayerCard);
                }
            });
            
            const currentPlayer = gameState.players.find(p => p.isCurrentUser);
            const allReady = gameState.players.length > 0 && gameState.players.every(p => p.ready);
            const minPlayers = gameState.players.length >= 3;
            
            if (currentPlayer && currentPlayer.isHost && allReady && minPlayers) {
                startGameBtn.style.display = 'block';
            } else {
                startGameBtn.style.display = 'none';
            }
        }

        function renderMyCards() {
            if (!gameState.myPlayer) return;
            
            myAttributesContainer.innerHTML = '';
            
            const attributes = [
                { key: 'profession', name: '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è', icon: 'fas fa-briefcase' },
                { key: 'health', name: '–ó–¥–æ—Ä–æ–≤—å–µ', icon: 'fas fa-heartbeat' },
                { key: 'biology', name: '–ë–∏–æ–ª–æ–≥–∏—è', icon: 'fas fa-dna' },
                { key: 'hobby', name: '–•–æ–±–±–∏', icon: 'fas fa-puzzle-piece' },
                { key: 'luggage', name: '–ë–∞–≥–∞–∂', icon: 'fas fa-suitcase' },
                { key: 'phobia', name: '–§–æ–±–∏—è', icon: 'fas fa-ghost' },
                { key: 'character', name: '–•–∞—Ä–∞–∫—Ç–µ—Ä', icon: 'fas fa-user' },
                { key: 'additionalInfo', name: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ', icon: 'fas fa-info-circle' }
            ];
            
            attributes.forEach(attr => {
                const value = gameState.myPlayer[attr.key];
                
                const attributeElement = document.createElement('div');
                attributeElement.className = `my-attribute ${gameState.myPlayer.revealed[attr.key] ? 'revealed' : ''}`;
                
                attributeElement.innerHTML = `
                    <div class="attribute-name">
                        <i class="${attr.icon}"></i> ${attr.name}
                    </div>
                    <div class="attribute-value">${value}</div>
                    ${!gameState.myPlayer.revealed[attr.key] ? '<div style="color: var(--text-secondary); font-size: 0.8rem;">(—Å–∫—Ä—ã—Ç–æ)</div>' : ''}
                `;
                
                myAttributesContainer.appendChild(attributeElement);
            });
        }

        function renderAttributesTable() {
            if (!gameState.gameStarted) return;
            
            attributesTableBody.innerHTML = '';
            
            gameState.players.forEach(player => {
                const row = document.createElement('tr');
                
                const nameCell = document.createElement('td');
                nameCell.className = 'player-name-cell';
                nameCell.textContent = `${player.username} ${player.isCurrentUser ? '(–í—ã)' : ''} ${player.isHost ? 'üëë' : ''}`;
                row.appendChild(nameCell);
                
                const attributes = ['profession', 'health', 'biology', 'hobby', 'luggage', 'phobia', 'character', 'additionalInfo'];
                
                attributes.forEach(attr => {
                    const cell = document.createElement('td');
                    const isRevealed = player.revealed[attr];
                    const canReveal = canRevealAttribute(attr) && player.isCurrentUser && !isRevealed;
                    
                    cell.className = `attribute-cell ${isRevealed ? 'revealed' : 'hidden'}`;
                    
                    let cellContent = '';
                    if (isRevealed) {
                        cellContent = `<div class="attribute-value">${player[attr]}</div>`;
                    } else {
                        cellContent = `<div class="attribute-value">???</div>`;
                    }
                    
                    if (canReveal) {
                        cellContent += `<button class="reveal-table-btn" data-attribute="${attr}" title="–†–∞—Å–∫—Ä—ã—Ç—å ${getAttributeName(attr)}">
                            <i class="fas fa-eye"></i>
                        </button>`;
                    }
                    
                    cell.innerHTML = cellContent;
                    row.appendChild(cell);
                });
                
                attributesTableBody.appendChild(row);
            });

            attributesTableBody.querySelectorAll('.reveal-table-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const attribute = this.dataset.attribute;
                    revealAttribute(gameState.myPlayer.id, attribute);
                });
            });
        }
        
        function canRevealAttribute(attribute) {
            if (!gameState.myPlayer) return false;
            const currentRoundAttributes = roundAttributes[gameState.currentRound - 1];
            return currentRoundAttributes.includes(attribute);
        }
        
        function createPlayerCard(player, context) {
            const card = document.createElement('div');
            card.className = `player-card card ${player.ready ? 'ready' : ''}`;
            card.dataset.playerId = player.id;
            
            let attributesHTML = '';
            const attributes = [
                { key: 'profession', name: '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è', icon: 'fas fa-briefcase' },
                { key: 'health', name: '–ó–¥–æ—Ä–æ–≤—å–µ', icon: 'fas fa-heartbeat' },
                { key: 'biology', name: '–ë–∏–æ–ª–æ–≥–∏—è', icon: 'fas fa-dna' },
                { key: 'hobby', name: '–•–æ–±–±–∏', icon: 'fas fa-puzzle-piece' },
                { key: 'luggage', name: '–ë–∞–≥–∞–∂', icon: 'fas fa-suitcase' },
                { key: 'phobia', name: '–§–æ–±–∏—è', icon: 'fas fa-ghost' },
                { key: 'character', name: '–•–∞—Ä–∞–∫—Ç–µ—Ä', icon: 'fas fa-user' },
                { key: 'additionalInfo', name: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ', icon: 'fas fa-info-circle' }
            ];
            
            attributes.forEach(attr => {
                const isRevealed = player.revealed[attr.key];
                const value = isRevealed ? player[attr.key] : '???';
                
                attributesHTML += `
                    <div class="attribute ${isRevealed ? '' : 'hidden'}">
                        <span class="attribute-name"><i class="${attr.icon}"></i> ${attr.name}:</span>
                        <span class="attribute-value">${value}</span>
                    </div>
                `;
            });
            
            card.innerHTML = `
                <div class="player-header">
                    <div class="player-name">${player.username} ${player.isCurrentUser ? '(–í—ã)' : ''} ${player.isHost ? 'üëë' : ''}</div>
                    <div class="player-status ${player.ready ? 'ready' : ''}">${player.ready ? '–ì–æ—Ç–æ–≤' : '–ù–µ –≥–æ—Ç–æ–≤'}</div>
                </div>
                <div class="attributes-list">
                    ${attributesHTML}
                </div>
            `;
            
            return card;
        }
        
        function revealAttribute(playerId, attribute) {
            const player = gameState.players.find(p => p.id === playerId);
            if (player && player.isCurrentUser && canRevealAttribute(attribute)) {
                player.revealed[attribute] = true;
                renderPlayers();
                renderMyCards();
                renderAttributesTable();
                socket.emit('reveal_attribute', {
                    attribute: attribute
                });
                addSystemMessage(`–í—ã —Ä–∞—Å–∫—Ä—ã–ª–∏ —Å–≤–æ—é ${getAttributeName(attribute)}`, 'game');
            }
        }
        
        function getAttributeName(key) {
            const names = {
                profession: '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è',
                health: '–ó–¥–æ—Ä–æ–≤—å–µ', 
                biology: '–ë–∏–æ–ª–æ–≥–∏—è',
                hobby: '–•–æ–±–±–∏',
                luggage: '–ë–∞–≥–∞–∂',
                phobia: '–§–æ–±–∏—è',
                character: '–•–∞—Ä–∞–∫—Ç–µ—Ä',
                additionalInfo: '–î–æ–ø. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'
            };
            return names[key] || key;
        }
        
        function addSystemMessage(text, context) {
            const message = document.createElement('div');
            message.className = 'message system';
            message.textContent = text;
            
            if (context === 'lobby') {
                lobbyChat.appendChild(message);
                lobbyChat.scrollTop = lobbyChat.scrollHeight;
            } else {
                gameChat.appendChild(message);
                gameChat.scrollTop = gameChat.scrollHeight;
            }
        }
        
        function addChatMessage(sender, text, context) {
            const message = document.createElement('div');
            message.className = 'message';
            message.innerHTML = `<span class="message-sender">${sender}:</span> ${text}`;
            
            if (context === 'lobby') {
                lobbyChat.appendChild(message);
                lobbyChat.scrollTop = lobbyChat.scrollHeight;
            } else {
                gameChat.appendChild(message);
                gameChat.scrollTop = gameChat.scrollHeight;
            }
        }
        
        function renderVotePlayers() {
            votePlayersGrid.innerHTML = '';
            gameState.selectedVote = null;
            confirmVoteBtn.style.display = 'none';
            
            gameState.players.forEach(player => {
                const card = document.createElement('div');
                card.className = 'player-card card vote-player-card';
                card.dataset.playerId = player.id;
                
                let revealedAttributes = '';
                Object.entries(player.revealed).forEach(([key, isRevealed]) => {
                    if (isRevealed) {
                        revealedAttributes += `<div class="attribute"><span class="attribute-name">${getAttributeName(key)}:</span> <span class="attribute-value">${player[key]}</span></div>`;
                    }
                });
                
                card.innerHTML = `
                    <div class="player-header">
                        <div class="player-name">${player.username} ${player.isCurrentUser ? '(–í—ã)' : ''}</div>
                    </div>
                    <div class="attributes-list">
                        ${revealedAttributes || '<div class="attribute">–ù–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫</div>'}
                    </div>
                    <button class="btn vote-select-btn" data-player-id="${player.id}" ${player.isCurrentUser ? 'disabled' : ''}>
                        <i class="fas fa-user-minus"></i> –í—ã–±—Ä–∞—Ç—å –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è
                    </button>
                `;
                votePlayersGrid.appendChild(card);
            });
            
            document.querySelectorAll('.vote-select-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const playerId = this.dataset.playerId;
                    gameState.selectedVote = playerId;
                    
                    document.querySelectorAll('.vote-player-card').forEach(card => {
                        card.style.borderColor = 'var(--border)';
                    });
                    
                    this.closest('.vote-player-card').style.borderColor = 'var(--highlight)';
                    
                    confirmVoteBtn.style.display = 'block';
                });
            });
        }
        
        tabCreate.addEventListener('click', function() {
            tabCreate.classList.add('active');
            tabJoin.classList.remove('active');
            createTab.style.display = 'block';
            joinTab.style.display = 'none';
        });

        tabJoin.addEventListener('click', function() {
            tabJoin.classList.add('active');
            tabCreate.classList.remove('active');
            joinTab.style.display = 'block';
            createTab.style.display = 'none';
        });

        createRoomBtn.addEventListener('click', function() {
            const username = usernameCreate.value.trim();
            if (username.length < 2) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)');
                return;
            }
            
            gameState.currentUser = username;
            userDisplay.textContent = username;
            userDisplay.style.display = 'block';
            logoutBtn.style.display = 'block';
            
            socket.emit('create_room', username);
            
            authScreen.classList.remove('active');
            lobbyScreen.classList.add('active');
        });

        joinRoomBtn.addEventListener('click', function() {
            const username = usernameJoin.value.trim();
            const roomCode = roomCodeInput.value.trim().toUpperCase();
            
            if (username.length < 2) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)');
                return;
            }
            
            if (roomCode.length < 4) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã (–º–∏–Ω–∏–º—É–º 4 —Å–∏–º–≤–æ–ª–∞)');
                return;
            }
            
            gameState.currentUser = username;
            userDisplay.textContent = username;
            userDisplay.style.display = 'block';
            logoutBtn.style.display = 'block';
            
            socket.emit('join_room', { roomCode, username });
            
            authScreen.classList.remove('active');
            lobbyScreen.classList.add('active');
        });
        
        logoutBtn.addEventListener('click', function() {
            socket.emit('leave_room');
            resetGameState();
        });
        
        readyBtn.addEventListener('click', function() {
            socket.emit('toggle_ready');
        });
        
        startGameBtn.addEventListener('click', function() {
            socket.emit('start_game');
        });

        revealProfessionBtn.addEventListener('click', function() {
            socket.emit('reveal_attribute', { attribute: 'profession' });
        });

        continueGameBtn.addEventListener('click', function() {
            socket.emit('next_round');
        });

        startVoteBtn.addEventListener('click', function() {
            socket.emit('start_voting');
        });
        
        leaveRoomBtn.addEventListener('click', function() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É?')) {
                logoutBtn.click();
            }
        });
        
        confirmVoteBtn.addEventListener('click', function() {
            if (gameState.selectedVote) {
                socket.emit('cast_vote', { targetPlayerId: gameState.selectedVote });
                addSystemMessage('–í—ã –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–∏!', 'game');
                confirmVoteBtn.style.display = 'none';
            }
        });
        
        function resetGameState() {
            gameState.currentUser = null;
            gameState.players = [];
            gameState.gameStarted = false;
            gameState.currentRound = 1;
            gameState.myPlayer = null;
            gameState.selectedVote = null;
            
            userDisplay.style.display = 'none';
            logoutBtn.style.display = 'none';
            
            lobbyScreen.classList.remove('active');
            gameScreen.classList.remove('active');
            voteScreen.classList.remove('active');
            authScreen.classList.add('active');
            
            usernameCreate.value = '';
            usernameJoin.value = '';
            roomCodeInput.value = '';
        }
        
        function setupChatHandlers() {
            lobbyChatSend.addEventListener('click', sendLobbyMessage);
            lobbyChatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendLobbyMessage();
            });
            
            gameChatSend.addEventListener('click', sendGameMessage);
            gameChatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendGameMessage();
            });
        }
        
        function sendLobbyMessage() {
            const message = lobbyChatInput.value.trim();
            if (message && gameState.currentUser) {
                socket.emit('chat_message', {
                    message: message,
                    context: 'lobby'
                });
                lobbyChatInput.value = '';
            }
        }
        
        function sendGameMessage() {
            const message = gameChatInput.value.trim();
            if (message && gameState.currentUser) {
                socket.emit('chat_message', {
                    message: message,
                    context: 'game'
                });
                gameChatInput.value = '';
            }
        }
        
        setupChatHandlers();
        
        usernameCreate.value = '–ò–≥—Ä–æ–∫' + Math.floor(Math.random() * 1000);
        usernameJoin.value = '–ò–≥—Ä–æ–∫' + Math.floor(Math.random() * 1000);
    </script>
</body>
</html>
